<!DOCTYPE html>
<head>
    <title>
		Shop at Nature Petal | Nature Petal
	</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="shortcut icon" href="img/favicon.png">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	<link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<script src="js/data.js"></script>
</head>
</head>
<body data-spy="scroll" data-target="#navbarResponsive">
    <div id="home">
		<nav class="navbar navbar-expand-md navbar-dark bg-dark" >
			<a href="index.html" class="logo-nav">
				<img src="img/logo-main-h.svg" alt="nature-petal-logo">
			</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse"	data-target="#navbarResponsive">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarResponsive">
				<ul class="navbar-nav ml-auto">
					<li class="nav-item ">
						<a class="nav-link" href="shop.html">Shop</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="index.html#onsale">Events</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="index.html#stores">Stores</a>
					</li>	
					<li class="nav-item">
						<a class="nav-link" href="signin.html">Sign in</a>
					</li>
					<li class="nav-item" >
						<a class="nav-link" href="wishlist.html">
							<svg fill="#e9ebcf" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
							viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve" >
						
						<path d="M38.4,39.6c-3.4,3.8-7.1,6.7-10.7,7.9C26.9,47.8,25,48,25,48s-1.9-0.1-2.7-0.4c-1.2-0.4-2.5-1-3.7-1.8
							c-13-8.1-25.8-35-13-42.1c4.3-2.4,9.2-1.7,13-0.5c3.8,1.2,7.1,6.9,7.1,6.9s5.7-8.2,12.7-8c2,0.1,4.1,0.5,6.1,1.6
							C54.9,9.4,48.2,28.4,38.4,39.6z"/>
						</svg></a>
 					</li>					
					<li class="nav-item">
						<a class="nav-link" href="cart.html">Cart</a>
 					</li>					
					<li class="nav-item">
						<a class="nav-link" href="about.html">About<i class="fa fa-star"></i></a>
 					</li>					
				</ul>
			</div>
		</nav>
	</div>
	<div>
		<div id="shop-banner" class="carousel slide" data-ride="carousel" data-interval="4500"  data-pause="false">
			<ul>
				<li data-target="#shop-banner" data-slide-to="0" class="active"></li>
				<li data-target="#shop-banner" data-slide-to="1"></li>
				<li data-target="#shop-banner" data-slide-to="2"></li>
			</ul>
			<div class="carousel-inner" role="listbox">
			<div class="carousel-item active">
				<img src="img/Artboard 4.png"/>
			</div>
			<div class="carousel-item ">
				<img src="img/Artboard 2.png"/>
			</div>
			<div class="carousel-item ">
				<img src="img/Artboard 5.png"/>
			</div>
		</div>
		<a class="carousel-control-prev" href="#shop-banner" data-slide="prev">
			<span class="carousel-control-prev-icon"></span>
		  </a>
		  <a class="carousel-control-next" href="#shop-banner" data-slide="next">
			<span class="carousel-control-next-icon"></span>
		  </a>
	</div>
</div>
	<section id="shop" class="gallery-block cards-gallery">
		<!-- <div class="heading">
			<h2>Shop</h2>
		</div> -->
		<div class="row pl-5 pr-5">
			<div class="col-xs  col-sm-12  col-lg-2 filter-menu"  style="z-index:100;">
				<h5>Filters</h5>
				<a href="cart.html">cart</a>
			</div>
			
			<div class="col-xs col-sm-12 col-lg-10">
				<div class="container-fluid">
					<div id="result-count"></div>
					<div class="row" id="products"></div>
				</div>
			</div>			
		</div>
	
	</section>

	<footer>
		<div class="row padding">
			<div class="col-xs-12 col-sm-6 col-md-3 col-lg-3 text-center">
				<div class="logo">
					<a href="#home">
						<img src="img/logo-main-v.svg" alt="nature-petal-logo"> 
					</a>
				</div>					
				<div class="social-media">	
					<a href="#"><i class="fa fa-facebook-square"></i></a>
					<a href="#"><i class="fab fa-youtube"></i></a>
					<a href="#"><i class="fa fa-instagram"></i></a>
					<a href="#"><i class="fa fa-twitter"></i></a>
				</div>		
			</div>
			<div class="col-xs-12 col-sm-6 col-md-3 col-lg-3 text-center  footer-content">
				<a href="#">OFFERS & EVENT</a>
				<a href="#">CUSTOMER SERVICE</a>
				<a href="about.html">BRAND STORY</a>
				<a href="#">CAREER</a>					
			</div>
			<div class="col-xs-12 col-sm-6 col-md-3 col-lg-3  text-center  footer-content">
				<a href="#">PRIVACY POLICY</a>
				<a href="about.html#contact">CONTACT US</a>
				<a href="#">CAMPAIGN</a>				
				<a href="#">TERMS & CONDITIONS</a>
			</div>
			<div class="col-xs-12 col-sm-6 col-md-3 col-lg-3 text-center  footer-content">
				<a href="#">STORES</a>
				<a href="#">STORE NOTICE</a>
				<a href="#">REVIEW</a>
				<a href="#">FAQS</a>
			</div>	
			<div class="row rights">
					<p>All Rights Reserved. Copyright NaturePetalÂ©<span id="curryear">2023</span></p>
			</div>
		</div>		
	</footer>

	
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>

	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

	
	<script>
		$(document).ready(function() {
			
			var wishlistedItem = JSON.parse(localStorage.getItem('wishlist')) || [];
			var wishlistcount = wishlistcount = JSON.parse(localStorage.getItem('wishlist')).length || 0;
			var cartItem = cartItem = JSON.parse(localStorage.getItem('cart')) || [];
			var cartCount =  cartItem.length || 0;

			var products = document.getElementById('products');

			var resultCount = `<p>Total ${ productArray.length} results, wishlist = <span id="wishlist-count">${wishlistcount}, </span></p>
			<p><span id= "cart-count"> Total ${cartCount} items in cart. </span></p>`;

			$('#result-count').append(resultCount);
			$('#result-count').css({
				'margin-bottom':'15px',
				'background-color' : '#F8F9F6',
				'padding':'3px',
				'font-weight' : '600',
				'color' : '#676869',
				'font-size' : '16px',
				'display' : 'flex',
				'justify-content' : 'center',
				'border-radius' : '4px',

			});
			var productCard ="";
			for(let i=0; i<productArray.length; ++i){
				let productId = productArray[i].src.split(".")[0].substr(4);
				productCard += `
					<div class="col-sm-6 col-md-4 col-lg-3">
						<div class="product-card-container">
						<a class="" href="https://dribbble.com/shots/21512983-Brand-Identity-and-Packaging-Nature-Petal" target="_blank">
							<img src="${productArray[i].src}" loading="lazy" alt="${productArray[i].name}" class="card-img-top">
							</a>
							<svg  class="wishlist-icon" data-product-id="${productId}-${productArray[i].id}" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
								viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve" >
							
							<path d="M38.4,39.6c-3.4,3.8-7.1,6.7-10.7,7.9C26.9,47.8,25,48,25,48s-1.9-0.1-2.7-0.4c-1.2-0.4-2.5-1-3.7-1.8
								c-13-8.1-25.8-35-13-42.1c4.3-2.4,9.2-1.7,13-0.5c3.8,1.2,7.1,6.9,7.1,6.9s5.7-8.2,12.7-8c2,0.1,4.1,0.5,6.1,1.6
								C54.9,9.4,48.2,28.4,38.4,39.6z"/>
							</svg>

						<div class="card-body p-0">`;
				if(productArray[i].discount!=='0'){
					let discountedPrice = productArray[i].price - Math.round(productArray[i].price* productArray[i].discount /100) ;
					productCard += `<p class="price-striked">$${productArray[i].price}</p>`;
					productCard += `<p class="discount">$${discountedPrice}</p>`;
				}else{
					productCard += `<p class="price">$${productArray[i].price}</p>`;
				}
				productCard += `
							<h6 class="ml-1 p-3">${productArray[i].name}</h6>	
							<div class="icons">
									<div class="add-to-cart" data-product-id="${productId}-${productArray[i].id}-add">
										<button class="btn3" name="${productId}-${productArray[i].id}-add" >Add&nbsp;to&nbsp;cart</button>
									</div>
								</div>
							</div>
						</div>
						</div>
						</div>				
						`;
			}
			$('#products').append(productCard);
			$('.product-card-container .icons').css({
				'border-radius':"3px",
				'width': '100%',
				'height' :'40px',
			});
			
			$('.wishlist-icon').css({
				'fill':'#e1e1e1',
			});
		
			$('.add-to-cart').click(function(){
				let productId = $(this).data('product-id');

					$('#cart-count').text(++cartCount);
					
					let newItem = productArray.find(item => {
						let id = `${item?.src.split(".")[0].substr(4)}-${item?.id}-add`;
						console.log("id ", id)
						console.log("productId ", productId)
						if(id === productId){
							if(item.qty == undefined || item.qty == null){
								item.qty = 1;
								console.log("11",	item.qty );
								
							}else{
								
								item.qty += 1;
								console.log("12",	item.qty );
							}
							return id === productId;
						}
					}
					);

					var existingItem = cartItem.find(item =>item.id ===	newItem.id) ;

					if(existingItem == undefined ){
						cartItem.push(newItem);
					}

					localStorage.setItem('cart', JSON.stringify(cartItem));
					$(this).css({
						'fill':'#d60222',
					})
					
				localStorage.setItem('cart', JSON.stringify(cartItem));
			});

			
			

			$('.wishlist-icon').click(function(){
				let productId = $(this).data('product-id');
				$(this).toggleClass('wishlisted');

				if($(`.wishlist-icon[data-product-id="${productId}"]`).hasClass('wishlisted')){
					
					$('#wishlist-count').text(++wishlistcount);
					let newItemWishlited = productArray.find(item => {
						let id = `${item.src.split(".")[0].substr(4)}-${item.id}`;
						return id === productId}
					);
			
					console.log("1",wishlistedItem)
					wishlistedItem.push(newItemWishlited);
					console.log("2",wishlistedItem)

					localStorage.setItem('wishlist', wishlistedItem);
	
					$(this).css({
						'fill':'#d60222',
					})
					
				}else{

					$('#wishlist-count').text(--wishlistcount);

					let updatedWishList = wishlistedItem.filter((item, index)=>{
						let id = `${item.src.split(".")[0].substr(4)}-${item.id}`;
						return id!== productId;
					});
					wishlistedItem =[...updatedWishList];
					$(this).css({
						'fill':'#e1e1e1',
					})
				}
				localStorage.setItem('wishlist', JSON.stringify(wishlistedItem));
				console.log(wishlistcount)
			});

			
		
			$(document).ready(function() {
				let wishlistedItem = JSON.parse(localStorage.getItem('wishlist'));
				if(wishlistedItem!=null){

					for(let i=0; i<wishlistedItem.length; i++){
						console.log(wishlistedItem[i])
						let productId = `${wishlistedItem[i].src.split(".")[0].substr(4)}-${wishlistedItem[i].id}`; 
						console.log(productId)

						$(`.wishlist-icon[data-product-id="${productId}"]`).addClass('wishlisted').css({
							'fill':'#d60222',
						});
					}
				}
				if(cartItem!==null){

					for(let i=0; i<cartItem.length; i++){
						console.log(cartItem)
						let productId = `${cartItem[i]?.src.split(".")[0].substr(4)}-${cartItem[i]?.id}`; 
						console.log(productId)

						$(`.add-to-cart [data-product-id="${productId}"]`).addClass('added-to-cart').css({
							'fill':'#d60222',
						});
					}
				}
				// Function to check viewport width and apply styles
				function checkViewportWidth() {
					var viewportWidth = $(window).width();

					// Check if viewport width is less than 600px
					if (viewportWidth <= 500) {
						// Apply styles for small screens
						$('#products>div').css({'margin':'12px '});
						$('#products>div').css({
						'border' : '2px solid #f1f2ff',
						'border-radius' : '4px',
						'padding': '12px',	
						})
					} 
				}

				// Call the function on page load
				checkViewportWidth();

				// Call the function whenever the window is resized
				$(window).resize(function() {
					checkViewportWidth();
				});
			});

			var container = document.createElement('div');
			container.id = "wrapper";

			$('body').append(container);
			var categorgy = ["Soap", "Lotion"];
			var html = '<div><ul>';

			for(var i=0; i<categorgy.length; i++){
				html+= `<li><input type="checkbox" name="checkbox${productArray[i].id}"/><label for="checkbox${productArray[i].id}">${categorgy[i]}</label></li>`;
			}

			html+= '</ul></div>';

			$('.filter-menu').append(html);
			$('.filter-menu').css({
				'display' : 'flex',
				'flex-direction' : 'column',
				'justify-content' : 'start'
			});
			$('.filter-menu div').css({
				
				// 'padding' : '10px 3px ',
				'margin' : '2px',
				'background - color':'#cecece',
				'height' : '300px',
			})

			$('.filter-menu div ul').css({
				'padding': '2px',
			})
			$('.filter-menu div ul li').css({
				'display': 'flex',
				'align-items':'center'
			})

			$('.filter-menu div input').css({
				'margin':'0',
				'margin': '4px 0',
				'height':'20px',
				'width': '20px',
				'font-size' : '12px',
			})
		}); 
	

	</script>
</body>

</html>